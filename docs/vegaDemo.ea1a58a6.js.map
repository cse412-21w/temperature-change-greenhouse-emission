{"version":3,"sources":["vegaDemo.js"],"names":["ds","da","test","countries","year","year_ghg","ghg","countries1","pollutant","options","config","init","view","tooltip","vegaTooltip","Handler","call","renderer","vl","register","vega","vegaLite","d3","csv","ghgData","then","data","forEach","d","push","includes","Year","drawBarVegaLite2","Pollutant","drawLineVegalite","fpData","Country","drawBarVegaLite","tempData","drawBarVegaLite1","base","markLine","encode","x","fieldT","title","color","fieldN","width","height","cb","transform","filter","y","average","methane","no","hconcat","render","viewElement","document","getElementById","appendChild","selectGenre","selectSingle","fields","bind","menu","temp","markBar","select","groupby","aggregate","as","fieldQ","opacity","if","value","scale","vconcat","selection","fieldO","slider"],"mappings":";;AAAA;;AACA;;AACA;;;;AACA;;AAEA,IAAIA,EAAE,GAAG,EAAT;AACA,IAAIC,EAAE,GAAG,EAAT;AACA,IAAIC,IAAI,GAAG,EAAX;AACA,IAAIC,SAAS,GAAG,EAAhB;AACA,IAAIC,IAAI,GAAG,EAAX;AACA,IAAIC,QAAQ,GAAG,EAAf;AACA,IAAIC,GAAG,GAAG,EAAV;AACA,IAAIC,UAAU,GAAG,EAAjB;AACA,IAAIC,SAAS,GAAG,EAAhB;AAGA,IAAMC,OAAO,GAAG;AACdC,EAAAA,MAAM,EAAE,CACN;AADM,GADM;AAIdC,EAAAA,IAAI,EAAE,cAACC,IAAD,EAAU;AACd;AACAA,IAAAA,IAAI,CAACC,OAAL,CAAa,IAAIC,WAAW,CAACC,OAAhB,GAA0BC,IAAvC;AACD,GAPa;AAQdJ,EAAAA,IAAI,EAAE;AACJ;AACA;AACA;AACA;AACA;AACAK,IAAAA,QAAQ,EAAE;AANN;AARQ,CAAhB;AAkBAC,EAAE,CAACC,QAAH,CAAYC,IAAZ,EAAkBC,QAAlB,EAA4BZ,OAA5B;AAEAa,EAAE,CAACC,GAAH,CAAOC,oBAAP,EAAgBC,IAAhB,CAAqB,UAASC,IAAT,EAAe;AAClCA,EAAAA,IAAI,CAACC,OAAL,CAAa,UAASC,CAAT,EAAW;AACtBtB,IAAAA,GAAG,CAACuB,IAAJ,CAASD,CAAT;AACD,GAFD;AAGAN,EAAAA,EAAE,CAACC,GAAH,CAAOC,oBAAP,EAAgBC,IAAhB,CAAqB,UAASC,IAAT,EAAe;AAClCA,IAAAA,IAAI,CAACC,OAAL,CAAa,UAASC,CAAT,EAAW;AACtB,UAAI,CAACvB,QAAQ,CAACyB,QAAT,CAAkBF,CAAC,CAACG,IAApB,CAAL,EAAgC;AAC9B1B,QAAAA,QAAQ,CAACwB,IAAT,CAAcD,CAAC,CAACG,IAAhB;AACD;AACF,KAJD;AAKD,GAND;AAQAC,EAAAA,gBAAgB;AACjB,CAbD;AAeAV,EAAE,CAACC,GAAH,CAAOC,oBAAP,EAAgBC,IAAhB,CAAqB,UAASC,IAAT,EAAe;AAClCA,EAAAA,IAAI,CAACC,OAAL,CAAa,UAASC,CAAT,EAAW;AACtB1B,IAAAA,IAAI,CAAC2B,IAAL,CAAUD,CAAV;;AACA,QAAI,CAACpB,SAAS,CAACsB,QAAV,CAAmBF,CAAC,CAACK,SAArB,CAAL,EAAsC;AACpCzB,MAAAA,SAAS,CAACqB,IAAV,CAAeD,CAAC,CAACK,SAAjB;AACD;AACF,GALD;AAMAC,EAAAA,gBAAgB;AACjB,CARD;AAUAZ,EAAE,CAACC,GAAH,CAAOY,uBAAP,EAAeV,IAAf,CAAoB,UAASC,IAAT,EAAe;AACjCA,EAAAA,IAAI,CAACC,OAAL,CAAa,UAASC,CAAT,EAAW;AACtB5B,IAAAA,EAAE,CAAC6B,IAAH,CAAQD,CAAR;;AACA,QAAI,CAACzB,SAAS,CAAC2B,QAAV,CAAmBF,CAAC,CAACQ,OAArB,CAAL,EAAoC;AAClCjC,MAAAA,SAAS,CAAC0B,IAAV,CAAeD,CAAC,CAACQ,OAAjB;AACD;AACF,GALD;AAMAC,EAAAA,eAAe;AAChB,CARD;AAUAf,EAAE,CAACC,GAAH,CAAOe,iBAAP,EAAiBb,IAAjB,CAAsB,UAASC,IAAT,EAAe;AACnCA,EAAAA,IAAI,CAACC,OAAL,CAAa,UAASC,CAAT,EAAW;AACtB3B,IAAAA,EAAE,CAAC4B,IAAH,CAAQD,CAAR;;AACA,QAAI,CAACrB,UAAU,CAACuB,QAAX,CAAoBF,CAAC,CAACQ,OAAtB,CAAL,EAAqC;AACnC7B,MAAAA,UAAU,CAACsB,IAAX,CAAgBD,CAAC,CAACQ,OAAlB;AACD;;AACD,QAAI,CAAChC,IAAI,CAAC0B,QAAL,CAAcF,CAAC,CAACG,IAAhB,CAAL,EAA4B;AAC1B3B,MAAAA,IAAI,CAACyB,IAAL,CAAUD,CAAC,CAACG,IAAZ;AACD;AACF,GARD;AASAQ,EAAAA,gBAAgB;AACjB,CAXD;;AAaA,SAASL,gBAAT,GAA4B;AAC1B,MAAMM,IAAI,GAAGtB,EAAE,CAACuB,QAAH,GACZf,IADY,CACPxB,IADO,EAEZwC,MAFY,CAGXxB,EAAE,CAACyB,CAAH,GAAOC,MAAP,CAAc,MAAd,EAAsBC,KAAtB,CAA4B,OAA5B,CAHW,EAIX3B,EAAE,CAAC4B,KAAH,GAAWC,MAAX,CAAkB,WAAlB,CAJW,EAMZC,KANY,CAMN,GANM,EAOZC,MAPY,CAOL,GAPK,CAAb;AAQA,MAAMC,EAAE,GAAGV,IAAI,CAACW,SAAL,CAAejC,EAAE,CAACkC,MAAH,CAAU,qCAAV,CAAf,EAAiEV,MAAjE,CAAwExB,EAAE,CAACmC,CAAH,GAAOC,OAAP,CAAe,OAAf,CAAxE,CAAX;AACA,MAAMC,OAAO,GAAGf,IAAI,CAACW,SAAL,CAAejC,EAAE,CAACkC,MAAH,CAAU,8BAAV,CAAf,EAA0DV,MAA1D,CAAiExB,EAAE,CAACmC,CAAH,GAAOC,OAAP,CAAe,OAAf,CAAjE,CAAhB;AACA,MAAME,EAAE,GAAGhB,IAAI,CAACW,SAAL,CAAejC,EAAE,CAACkC,MAAH,CAAU,oCAAV,CAAf,EAAgEV,MAAhE,CAAuExB,EAAE,CAACmC,CAAH,GAAOC,OAAP,CAAe,OAAf,CAAvE,CAAX;AACApC,EAAAA,EAAE,CAACuC,OAAH,CAAWP,EAAX,EAAeK,OAAf,EAAwBC,EAAxB,EACCE,MADD,GAECjC,IAFD,CAEM,UAAAkC,WAAW,EAAI;AACnBC,IAAAA,QAAQ,CAACC,cAAT,CAAwB,KAAxB,EAA+BC,WAA/B,CAA2CH,WAA3C;AACD,GAJD;AAKD;;AAED,SAAStB,eAAT,GAA2B;AACzB;AACA;AACE,MAAM0B,WAAW,GAAG7C,EAAE,CAAC8C,YAAH,CAAgB,QAAhB,EACjBC,MADiB,CACV,SADU,EAEjBtD,IAFiB,CAEZ;AAACyB,IAAAA,OAAO,EAAEjC,SAAS,CAAC,CAAD;AAAnB,GAFY,EAGjB+D,IAHiB,CAGZhD,EAAE,CAACiD,IAAH,CAAQhE,SAAR,CAHY,CAApB;AAKA,MAAMiE,IAAI,GAAGlD,EAAE,CAACmD,OAAH,GACV3C,IADU,CACL1B,EADK,EAEVsE,MAFU,CAEHP,WAFG,EAGVZ,SAHU,CAITjC,EAAE,CAACqD,OAAH,CAAW,CAAC,SAAD,EAAW,MAAX,CAAX,EACGC,SADH,CACatD,EAAE,CAACoC,OAAH,CAAW,aAAX,EAA0BmB,EAA1B,CAA6B,UAA7B,CADb,CAJS,EAMT/B,MANS,CAOTxB,EAAE,CAACmC,CAAH,GAAOqB,MAAP,CAAc,UAAd,EAA0B7B,KAA1B,CAAgC,oBAAhC,CAPS,EAQT3B,EAAE,CAACyB,CAAH,GAAO+B,MAAP,CAAc,MAAd,CARS,EASTxD,EAAE,CAACyD,OAAH,GAAaC,EAAb,CAAgBb,WAAhB,EAA6B7C,EAAE,CAAC2D,KAAH,CAAS,CAAT,CAA7B,EAA0CA,KAA1C,CAAgD,CAAhD,CATS,EAUT3D,EAAE,CAAC4B,KAAH,GAAWC,MAAX,CAAkB,SAAlB,EAA6B+B,KAA7B,CAAmC,WAAnC,CAVS,EAWT9B,KAXS,CAWH,GAXG,EAYVC,MAZU,CAYH,GAZG,CAAb;AAcA,MAAM3C,GAAG,GAAGY,EAAE,CAACmD,OAAH,GACT3C,IADS,CACJ1B,EADI,EAETmD,SAFS,CAGRjC,EAAE,CAACkC,MAAH,CAAU,qCAAV,CAHQ,EAIRlC,EAAE,CAACqD,OAAH,CAAW,CAAC,SAAD,EAAW,MAAX,CAAX,EACGC,SADH,CACatD,EAAE,CAACoC,OAAH,CAAW,KAAX,EAAkBmB,EAAlB,CAAqB,SAArB,CADb,CAJQ,EAMR/B,MANQ,CAORxB,EAAE,CAACyB,CAAH,GAAO+B,MAAP,CAAc,MAAd,CAPQ,EAQRxD,EAAE,CAACmC,CAAH,GAAOqB,MAAP,CAAc,SAAd,EAAyB7B,KAAzB,CAA+B,oBAA/B,CARQ,EASR3B,EAAE,CAACyD,OAAH,GAAaC,EAAb,CAAgBb,WAAhB,EAA6B7C,EAAE,CAAC2D,KAAH,CAAS,CAAT,CAA7B,EAA0CA,KAA1C,CAAgD,CAAhD,CATQ,EAUR3D,EAAE,CAAC4B,KAAH,GAAWC,MAAX,CAAkB,SAAlB,EAA6B+B,KAA7B,CAAmC,WAAnC,CAVQ,EAWR9B,KAXQ,CAWF,GAXE,EAYTC,MAZS,CAYF,GAZE,CAAZ;AAcA/B,EAAAA,EAAE,CAAC6D,OAAH,CAAWzE,GAAX,EAAgB8D,IAAhB,EACGV,MADH,GAEGjC,IAFH,CAEQ,UAAAkC,WAAW,EAAI;AACrBC,IAAAA,QAAQ,CAACC,cAAT,CAAwB,MAAxB,EAAgCC,WAAhC,CAA4CH,WAA5C;AACD,GAJD;AAKD;;AAEH,SAASpB,gBAAT,GAA4B;AACxB,MAAMyC,SAAS,GAAG9D,EAAE,CAAC8C,YAAH,CAAgB,QAAhB,EACbC,MADa,CACN,SADM,EACK,MADL,EAEbtD,IAFa,CAER;AAACyB,IAAAA,OAAO,EAAE7B,UAAU,CAAC,CAAD,CAApB;AAAyBwB,IAAAA,IAAI,EAAE3B,IAAI,CAAC,CAAD;AAAnC,GAFQ,EAGb8D,IAHa,CAGR;AAAC9B,IAAAA,OAAO,EAAElB,EAAE,CAACiD,IAAH,CAAQ5D,UAAR,CAAV;AAA+BwB,IAAAA,IAAI,EAAEb,EAAE,CAACiD,IAAH,CAAQ/D,IAAR;AAArC,GAHQ,CAAlB;AAKAc,EAAAA,EAAE,CAACmD,OAAH,GACC3C,IADD,CACMzB,EADN,EAECqE,MAFD,CAEQU,SAFR,EAGC7B,SAHD,CAIMjC,EAAE,CAACqD,OAAH,CAAW,CAAC,SAAD,EAAW,MAAX,EAAkB,OAAlB,CAAX,EACGC,SADH,CACatD,EAAE,CAACoC,OAAH,CAAW,aAAX,EAA0BmB,EAA1B,CAA6B,MAA7B,CADb,CAJN,EAOE/B,MAPF,CAQExB,EAAE,CAACyB,CAAH,GAAOsC,MAAP,CAAc,OAAd,CARF,EASE/D,EAAE,CAACmC,CAAH,GAAOqB,MAAP,CAAc,MAAd,EAAsB7B,KAAtB,CAA4B,oBAA5B,CATF,EAUE3B,EAAE,CAACyD,OAAH,GAAaC,EAAb,CAAgBI,SAAhB,EAA2BH,KAA3B,CAAiC,CAAjC,CAVF,CAUyC;AAVzC,IAYCnB,MAZD,GAaCjC,IAbD,CAaM,UAAAkC,WAAW,EAAI;AACnBC,IAAAA,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,WAAjC,CAA6CH,WAA7C;AACD,GAfD;AAgBH;;AAED,SAAS3B,gBAAT,GAA4B;AAC1B,MAAMgD,SAAS,GAAG9D,EAAE,CAAC8C,YAAH,CAAgB,QAAhB,EACfC,MADe,CACR,MADQ,EAEftD,IAFe,CAEV;AAACoB,IAAAA,IAAI,EAAE1B,QAAQ,CAAC,CAAD;AAAf,GAFU,EAGf6D,IAHe,CAGVhD,EAAE,CAACgE,MAAH,CAAU,IAAV,EAAe,IAAf,EAAoB,CAApB,CAHU,CAAlB;AAKAhE,EAAAA,EAAE,CAACmD,OAAH,GACG3C,IADH,CACQpB,GADR,EAEGgE,MAFH,CAEUU,SAFV,EAGG7B,SAHH,CAIIjC,EAAE,CAACqD,OAAH,CAAW,CAAC,SAAD,EAAW,MAAX,EAAkB,WAAlB,CAAX,CAJJ,EAMG7B,MANH,CAOIxB,EAAE,CAACyB,CAAH,GAAOW,OAAP,CAAe,OAAf,EAAwBT,KAAxB,CAA8B,wBAA9B,CAPJ,EAQI3B,EAAE,CAACmC,CAAH,GAAON,MAAP,CAAc,SAAd,CARJ,EASI7B,EAAE,CAAC4B,KAAH,GAAWC,MAAX,CAAkB,WAAlB,EAA+B+B,KAA/B,CAAqC,WAArC,CATJ,EAUI5D,EAAE,CAACL,OAAH,CAAW,CAAC,SAAD,EAAW,WAAX,EAAuB,OAAvB,CAAX,CAVJ,EAYG6C,MAZH,GAaGjC,IAbH,CAaQ,UAAAkC,WAAW,EAAI;AACnBC,IAAAA,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,WAAvC,CAAmDH,WAAnD;AACH,GAfD;AAgBD","file":"vegaDemo.ea1a58a6.js","sourceRoot":"..\\src","sourcesContent":["import fpData from '../static/temp-ghg-dataset.csv'\r\nimport ghgData from '../static/ghg_cleanup.csv'\r\nimport tempData from '../static/tempData.csv'\r\n\"use strict\";\r\n\r\nvar ds = [];\r\nvar da = [];\r\nvar test = [];\r\nvar countries = [];\r\nvar year = [];\r\nvar year_ghg = [];\r\nvar ghg = [];\r\nvar countries1 = [];\r\nvar pollutant = [];\r\n\r\n\r\nconst options = {\r\n  config: {\r\n    // Vega-Lite default configuration\r\n  },\r\n  init: (view) => {\r\n    // initialize tooltip handler\r\n    view.tooltip(new vegaTooltip.Handler().call);\r\n  },\r\n  view: {\r\n    // view constructor options\r\n    // remove the loader if you don't want to default to vega-datasets!\r\n    //   loader: vega.loader({\r\n    //     baseURL: \"\",\r\n    //   }),\r\n    renderer: \"canvas\",\r\n  },\r\n};\r\n\r\nvl.register(vega, vegaLite, options);\r\n\r\nd3.csv(ghgData).then(function(data) {\r\n  data.forEach(function(d){\r\n    ghg.push(d);\r\n  })\r\n  d3.csv(ghgData).then(function(data) {\r\n    data.forEach(function(d){\r\n      if (!year_ghg.includes(d.Year)) {\r\n        year_ghg.push(d.Year)\r\n      }\r\n    })\r\n  })\r\n\r\n  drawBarVegaLite2();\r\n});\r\n\r\nd3.csv(ghgData).then(function(data) {\r\n  data.forEach(function(d){\r\n    test.push(d);\r\n    if (!pollutant.includes(d.Pollutant)) {\r\n      pollutant.push(d.Pollutant);\r\n    }\r\n  })\r\n  drawLineVegalite();\r\n});\r\n\r\nd3.csv(fpData).then(function(data) {\r\n  data.forEach(function(d){\r\n    ds.push(d);\r\n    if (!countries.includes(d.Country)) {\r\n      countries.push(d.Country);\r\n    }\r\n  })\r\n  drawBarVegaLite();\r\n});\r\n\r\nd3.csv(tempData).then(function(data) {\r\n  data.forEach(function(d){\r\n    da.push(d);\r\n    if (!countries1.includes(d.Country)) {\r\n      countries1.push(d.Country);\r\n    }\r\n    if (!year.includes(d.Year)) {\r\n      year.push(d.Year);\r\n    }\r\n  })\r\n  drawBarVegaLite1();\r\n});\r\n\r\nfunction drawLineVegalite() {\r\n  const base = vl.markLine()\r\n  .data(test)\r\n  .encode(\r\n    vl.x().fieldT('Year').title('Years'),\r\n    vl.color().fieldN('Pollutant')\r\n  )\r\n  .width(240)\r\n  .height(180);\r\n  const cb = base.transform(vl.filter(\"datum.Pollutant == 'Carbon dioxide'\")).encode(vl.y().average(\"Value\"));\r\n  const methane = base.transform(vl.filter(\"datum.Pollutant == 'Methane'\")).encode(vl.y().average(\"Value\"));\r\n  const no = base.transform(vl.filter(\"datum.Pollutant == 'Nitrous oxide'\")).encode(vl.y().average(\"Value\"));\r\n  vl.hconcat(cb, methane, no)\r\n  .render()\r\n  .then(viewElement => {\r\n    document.getElementById('ghg').appendChild(viewElement);\r\n  });\r\n}\r\n\r\nfunction drawBarVegaLite() {\r\n  // var sunshine = add_data(vl, sunshine.csv, format_type = NULL);\r\n  // your visualization goes here\r\n    const selectGenre = vl.selectSingle('Select')\r\n      .fields('Country')\r\n      .init({Country: countries[0]})\r\n      .bind(vl.menu(countries));\r\n\r\n    const temp = vl.markBar()\r\n      .data(ds)\r\n      .select(selectGenre)\r\n      .transform(\r\n        vl.groupby(['Country','Year'])\r\n          .aggregate(vl.average('Temperature').as('avg_temp'))\r\n      ).encode(\r\n        vl.y().fieldQ('avg_temp').title('Temperature Change'),\r\n        vl.x().fieldQ('Year'),\r\n        vl.opacity().if(selectGenre, vl.value(1)).value(0),\r\n        vl.color().fieldN(\"Country\").scale('tableau20')\r\n      ).width(500)\r\n      .height(300);\r\n\r\n    const ghg = vl.markBar()\r\n      .data(ds)\r\n      .transform(\r\n        vl.filter('datum.Pollutant == \"Carbon dioxide\"'),\r\n        vl.groupby(['Country','Year'])\r\n          .aggregate(vl.average('GHG').as('avg_ghg'))\r\n      ).encode(\r\n        vl.x().fieldQ('Year'),\r\n        vl.y().fieldQ('avg_ghg').title('avg_carbon_dioxide'),\r\n        vl.opacity().if(selectGenre, vl.value(1)).value(0),\r\n        vl.color().fieldN(\"Country\").scale('tableau20')\r\n      ).width(500)\r\n      .height(300);\r\n\r\n    vl.vconcat(ghg, temp)\r\n      .render()\r\n      .then(viewElement => {\r\n      document.getElementById('view').appendChild(viewElement);\r\n    });\r\n  }\r\n\r\nfunction drawBarVegaLite1() {\r\n    const selection = vl.selectSingle('select')\r\n        .fields('Country', 'Year')\r\n        .init({Country: countries1[0], Year: year[0]})\r\n        .bind({Country: vl.menu(countries1), Year: vl.menu(year)});\r\n\r\n    vl.markBar()\r\n    .data(da)\r\n    .select(selection)\r\n    .transform(\r\n          vl.groupby(['Country','Year','Month'])\r\n            .aggregate(vl.average('Temperature').as('temp'))\r\n       )\r\n     .encode(\r\n      vl.x().fieldO('Month'),\r\n      vl.y().fieldQ('temp').title('temperature change'),\r\n      vl.opacity().if(selection).value(0)    // New\r\n    )\r\n    .render()\r\n    .then(viewElement => {\r\n      document.getElementById('view2').appendChild(viewElement);\r\n    });\r\n}\r\n\r\nfunction drawBarVegaLite2() {\r\n  const selection = vl.selectSingle('Select')\r\n    .fields('Year')\r\n    .init({Year: year_ghg[5]})\r\n    .bind(vl.slider(1990,2018,1));\r\n\r\n  vl.markBar()\r\n    .data(ghg)\r\n    .select(selection)\r\n    .transform(\r\n      vl.groupby(['Country','Year','Pollutant'])\r\n    )\r\n    .encode(\r\n      vl.x().average('Value').title('Amount of Gas Emission'),\r\n      vl.y().fieldN('Country'),\r\n      vl.color().fieldN('Pollutant').scale('tableau20'),\r\n      vl.tooltip(['Country','Pollutant','Value'])\r\n    )\r\n    .render()\r\n    .then(viewElement => {\r\n      document.getElementById('overall-bar').appendChild(viewElement);\r\n  });\r\n}"]}