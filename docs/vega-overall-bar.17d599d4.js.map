{"version":3,"sources":["vega-overall-bar.js"],"names":["ds","countries","year","ghg","options","config","init","view","tooltip","vegaTooltip","Handler","call","renderer","vl","register","vega","vegaLite","d3","csv","fpData","then","data","forEach","d","push","includes","Country","Year","drawBarVegaLite","drawBarVegaLite3","selectGenre","selectSingle","fields","bind","menu","temp","markBar","select","transform","groupby","aggregate","average","as","encode","y","fieldQ","title","x","opacity","if","value","width","height","filter","vconcat","render","viewElement","document","getElementById","appendChild"],"mappings":"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","file":"vega-overall-bar.17d599d4.js","sourceRoot":"../src","sourcesContent":["import ghgData from '../static/ghg_cleanup.csv'\nimport fpData from '../static/temp-ghg-dataset.csv'\n\"use strict\";\nvar ds = [];\nvar countries = [];\nvar year = [];\nvar ghg = [];\nvar year = [];\n\nconst options = {\n  config: {},\n  init: (view) => {\n    view.tooltip(new vegaTooltip.Handler().call);\n  },\n  view: {\n    renderer: \"canvas\",\n  },\n};\n\nvl.register(vega, vegaLite, options);\n\nd3.csv(fpData).then(function(data) {\n  data.forEach(function(d){\n    ds.push(d);\n    if (!countries.includes(d.Country)) {\n      countries.push(d.Country);\n    }\n    if (!year.includes(d.Year)) {\n      year.push(d.Year);\n    }\n  })\n\n  drawBarVegaLite();\n});\n\nfunction drawBarVegaLite3() {\n  const selectGenre = vl.selectSingle('Select') // name the selection 'Select'\n      .fields('Country')          // limit selection to the Major_Genre field\n      .init({Country: countries[0]}) // use first genre entry as initial value\n      .bind(vl.menu(countries));\n\n    const temp = vl.markBar()\n      .data(ds)\n      .select(selectGenre)\n      .transform(\n        //vl.if(selectGenre, vl.filter('datum.Country == ' + selectGenre)),\n        vl.groupby(['Country','Year'])\n          .aggregate(vl.average('Temperature').as('avg_temp'))\n      ).encode(\n        vl.y().fieldQ('avg_temp').title('Temperature Change'),\n        vl.x().fieldQ('Year'),\n        vl.opacity().if(selectGenre, vl.value(1)).value(0)\n      ).width(500)\n      .height(300);\n\n    const ghg = vl.markBar()\n      .data(ds)\n      .transform(\n        vl.filter('datum.Pollutant == \"Carbon dioxide\"'),\n        vl.groupby(['Country','Year'])\n          .aggregate(vl.average('GHG').as('avg_ghg'))\n      ).encode(\n        vl.x().fieldQ('Year'),\n        vl.y().fieldQ('avg_ghg').title('avg_carbon_dioxide'),\n        vl.opacity().if(selectGenre, vl.value(1)).value(0)\n      ).width(500)\n      .height(300);\n\n    vl.vconcat(ghg, temp)\n      .render()\n      .then(viewElement => {\n      document.getElementById('view').appendChild(viewElement);\n    });\n}"]}