{"version":3,"sources":["vega-overall-bar.js"],"names":["ghg","year","options","config","init","view","tooltip","vegaTooltip","Handler","call","renderer","vl","register","vega","vegaLite","d3","csv","ghgData","then","data","forEach","d","push","includes","Year","drawBarVegaLite","selection","selectSingle","fields","bind","slider","markBar","select","transform","groupby","encode","x","average","title","y","fieldN","color","scale","render","viewElement","document","getElementById","appendChild"],"mappings":";;AAAA;;;;AACA;;AAEA,IAAIA,GAAG,GAAG,EAAV;AACA,IAAIC,IAAI,GAAG,EAAX;AAEA,IAAMC,OAAO,GAAG;AACdC,EAAAA,MAAM,EAAE,EADM;AAEdC,EAAAA,IAAI,EAAE,cAACC,IAAD,EAAU;AACdA,IAAAA,IAAI,CAACC,OAAL,CAAa,IAAIC,WAAW,CAACC,OAAhB,GAA0BC,IAAvC;AACD,GAJa;AAKdJ,EAAAA,IAAI,EAAE;AACJK,IAAAA,QAAQ,EAAE;AADN;AALQ,CAAhB;AAUAC,EAAE,CAACC,QAAH,CAAYC,IAAZ,EAAkBC,QAAlB,EAA4BZ,OAA5B;AAEAa,EAAE,CAACC,GAAH,CAAOC,oBAAP,EAAgBC,IAAhB,CAAqB,UAASC,IAAT,EAAe;AAClCA,EAAAA,IAAI,CAACC,OAAL,CAAa,UAASC,CAAT,EAAW;AACtBrB,IAAAA,GAAG,CAACsB,IAAJ,CAASD,CAAT;AACD,GAFD;AAGAN,EAAAA,EAAE,CAACC,GAAH,CAAOC,oBAAP,EAAgBC,IAAhB,CAAqB,UAASC,IAAT,EAAe;AAClCA,IAAAA,IAAI,CAACC,OAAL,CAAa,UAASC,CAAT,EAAW;AACtB,UAAI,CAACpB,IAAI,CAACsB,QAAL,CAAcF,CAAC,CAACG,IAAhB,CAAL,EAA4B;AAC1BvB,QAAAA,IAAI,CAACqB,IAAL,CAAUD,CAAC,CAACG,IAAZ;AACD;AACF,KAJD;AAKD,GAND;AAQAC,EAAAA,eAAe;AAChB,CAbD;;AAeA,SAASA,eAAT,GAA2B;AACzB,MAAMC,SAAS,GAAGf,EAAE,CAACgB,YAAH,CAAgB,QAAhB,EACfC,MADe,CACR,MADQ,EAEfxB,IAFe,CAEV;AAACoB,IAAAA,IAAI,EAAEvB,IAAI,CAAC,CAAD;AAAX,GAFU,EAGf4B,IAHe,CAGVlB,EAAE,CAACmB,MAAH,CAAU,IAAV,EAAe,IAAf,EAAoB,CAApB,CAHU,CAAlB;AAKAnB,EAAAA,EAAE,CAACoB,OAAH,GACGZ,IADH,CACQnB,GADR,EAEGgC,MAFH,CAEUN,SAFV,EAGGO,SAHH,CAIItB,EAAE,CAACuB,OAAH,CAAW,CAAC,SAAD,EAAW,MAAX,EAAkB,WAAlB,CAAX,CAJJ,EAMGC,MANH,CAOIxB,EAAE,CAACyB,CAAH,GAAOC,OAAP,CAAe,OAAf,EAAwBC,KAAxB,CAA8B,wBAA9B,CAPJ,EAQI3B,EAAE,CAAC4B,CAAH,GAAOC,MAAP,CAAc,SAAd,CARJ,EASI7B,EAAE,CAAC8B,KAAH,GAAWD,MAAX,CAAkB,WAAlB,EAA+BE,KAA/B,CAAqC,WAArC,CATJ,EAUI/B,EAAE,CAACL,OAAH,CAAW,CAAC,SAAD,EAAW,WAAX,EAAuB,OAAvB,CAAX,CAVJ,EAYGqC,MAZH,GAaGzB,IAbH,CAaQ,UAAA0B,WAAW,EAAI;AACnBC,IAAAA,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,WAAvC,CAAmDH,WAAnD;AACH,GAfD;AAgBD","file":"vega-overall-bar.17d599d4.js","sourceRoot":"..\\src","sourcesContent":["import ghgData from '../static/ghg_cleanup.csv'  \r\n\"use strict\";     \r\n\r\nvar ghg = [];\r\nvar year = [];\r\n\r\nconst options = {\r\n  config: {},\r\n  init: (view) => {\r\n    view.tooltip(new vegaTooltip.Handler().call);\r\n  },\r\n  view: {\r\n    renderer: \"canvas\",\r\n  },\r\n};\r\n\r\nvl.register(vega, vegaLite, options);\r\n\r\nd3.csv(ghgData).then(function(data) {\r\n  data.forEach(function(d){\r\n    ghg.push(d);\r\n  })\r\n  d3.csv(ghgData).then(function(data) {\r\n    data.forEach(function(d){\r\n      if (!year.includes(d.Year)) {\r\n        year.push(d.Year)\r\n      }\r\n    })\r\n  })\r\n  \r\n  drawBarVegaLite();\r\n});\r\n\r\nfunction drawBarVegaLite() {\r\n  const selection = vl.selectSingle('Select') \r\n    .fields('Year')      \r\n    .init({Year: year[5]}) \r\n    .bind(vl.slider(1990,2018,1));\r\n  \r\n  vl.markBar()\r\n    .data(ghg)\r\n    .select(selection)\r\n    .transform(\r\n      vl.groupby(['Country','Year','Pollutant'])\r\n    )\r\n    .encode(\r\n      vl.x().average('Value').title('Amount of Gas Emission'),\r\n      vl.y().fieldN('Country'),\r\n      vl.color().fieldN('Pollutant').scale('tableau20'),\r\n      vl.tooltip(['Country','Pollutant','Value'])\r\n    )\r\n    .render()\r\n    .then(viewElement => {\r\n      document.getElementById('overall-bar').appendChild(viewElement);\r\n  });\r\n}"]}